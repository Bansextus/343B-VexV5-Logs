{"mode":"Text","hardwareTarget":"brain","textContent":"from vex import *\n\n# ----------------------------\n# Devices\n# ----------------------------\nbrain = Brain()\ncontroller = Controller(PRIMARY)\n\n# Drive motors (2 + 2)\nleft_drive = MotorGroup(\n    Motor(Ports.PORT1, GearSetting.RATIO_18_1, False),\n    Motor(Ports.PORT2, GearSetting.RATIO_18_1, False)\n)\n\nright_drive = MotorGroup(\n    Motor(Ports.PORT12, GearSetting.RATIO_18_1, True),\n    Motor(Ports.PORT13, GearSetting.RATIO_18_1, True)\n)\n\n# Extra motors (third motor on each side)\nextra_left  = Motor(Ports.PORT3,  GearSetting.RATIO_18_1, False)\nextra_right = Motor(Ports.PORT14, GearSetting.RATIO_18_1, True)\n\n# Sensors + drivetrain\ninertial = Inertial(Ports.PORT21)\ndrivetrain = SmartDrive(left_drive, right_drive, inertial, 319.19, 320, 40, MM)\n\n# Mechanisms\narm = Motor(Ports.PORT8, GearSetting.RATIO_18_1, False)\nintake = Motor(Ports.PORT6, GearSetting.RATIO_18_1, False)\n\n# ----------------------------\n# Helpers\n# ----------------------------\ndef calibrate_inertial_once():\n    brain.screen.clear_screen()\n    brain.screen.print(\"Calibrating inertial...\")\n    inertial.calibrate()\n    while inertial.is_calibrating():\n        wait(25, MSEC)\n    brain.screen.clear_screen()\n\ndef set_extras(left_pct, right_pct):\n    # left_pct/right_pct are -100..100\n    if left_pct > 0:\n        extra_left.spin(FORWARD, left_pct, PERCENT)\n    elif left_pct < 0:\n        extra_left.spin(REVERSE, -left_pct, PERCENT)\n    else:\n        extra_left.stop()\n\n    if right_pct > 0:\n        extra_right.spin(FORWARD, right_pct, PERCENT)\n    elif right_pct < 0:\n        extra_right.spin(REVERSE, -right_pct, PERCENT)\n    else:\n        extra_right.stop()\n\ndef stop_extras():\n    extra_left.stop()\n    extra_right.stop()\n\ndef apply_deadband(val, deadband=5):\n    return 0 if abs(val) <= deadband else val\n\n# ----------------------------\n# Autonomous (placeholder)\n# ----------------------------\ndef autonomous():\n    calibrate_inertial_once()\n    drivetrain.set_drive_velocity(55, PERCENT)\n    drivetrain.set_turn_velocity(45, PERCENT)\n\n    # Simple push auton (tune later)\n    extra_left.spin(FORWARD, 100, PERCENT)\n    extra_right.spin(FORWARD, 100, PERCENT)\n    drivetrain.drive_for(FORWARD, 800, MM)\n    drivetrain.drive_for(REVERSE, 250, MM)\n    stop_extras()\n    drivetrain.turn_for(RIGHT, 55, DEGREES)\n    extra_left.spin(FORWARD, 100, PERCENT)\n    extra_right.spin(FORWARD, 100, PERCENT)\n    drivetrain.drive_for(FORWARD, 600, MM)\n    drivetrain.drive_for(REVERSE, 200, MM)\n    drivetrain.turn_for(LEFT, 55, DEGREES)\n    stop_extras()\n    drivetrain.stop()\n\n# ----------------------------\n# Driver Control (JOYSTICKS)\n# Arcade drive:\n#   Axis3 (left stick Y) = forward/back\n#   Axis1 (right stick X) = turn\n# ----------------------------\ndef usercontrol():\n    six_motor = True  # start enabled\n    lastA = False\n    lastY = False\n\n    # You can tune these\n    DEAD = 5          # joystick deadband\n    TURN_SCALE = 0.85 # reduce turning sensitivity (0.0-1.0)\n\n    while True:\n        # ---- Toggle 6-motor drive ----\n        if controller.buttonA.pressing() and not lastA:\n            six_motor = True\n        if controller.buttonY.pressing() and not lastY:\n            six_motor = False\n\n        lastA = controller.buttonA.pressing()\n        lastY = controller.buttonY.pressing()\n\n        # ---- Joystick driving (arcade) ----\n        forward = apply_deadband(controller.axis3.position(), DEAD)  # -100..100\n        turn    = apply_deadband(controller.axis1.position(), DEAD)  # -100..100\n\n        # Scale turning if you want it less twitchy\n        turn = int(turn * TURN_SCALE)\n\n        # Arcade mix\n        left_pct  = forward + turn\n        right_pct = forward - turn\n\n        # Clamp to [-100, 100]\n        if left_pct > 100: left_pct = 100\n        if left_pct < -100: left_pct = -100\n        if right_pct > 100: right_pct = 100\n        if right_pct < -100: right_pct = -100\n\n        # Command drivetrain (4 motors)\n        drivetrain.set_drive_velocity(abs(forward), PERCENT)  # optional; SmartDrive wants a drive velocity set\n        # Better: drive each side directly for smooth joystick response:\n        left_drive.spin(FORWARD if left_pct >= 0 else REVERSE, abs(left_pct), PERCENT)\n        right_drive.spin(FORWARD if right_pct >= 0 else REVERSE, abs(right_pct), PERCENT)\n\n        # Extra motors follow if enabled\n        if six_motor:\n            set_extras(left_pct, right_pct)\n        else:\n            stop_extras()\n\n        # ---- Arm (L buttons) ----\n        if controller.buttonL1.pressing():\n            arm.spin(FORWARD)\n        elif controller.buttonL2.pressing():\n            arm.spin(REVERSE)\n        else:\n            arm.stop()\n\n        # ---- Intake (R buttons) ----\n        if controller.buttonR1.pressing():\n            intake.spin(FORWARD)\n        elif controller.buttonR2.pressing():\n            intake.spin(REVERSE)\n        else:\n            intake.stop()\n\n        wait(20, MSEC)\n\n# ----------------------------\n# Competition wiring\n# ----------------------------\ncomp = Competition(usercontrol, autonomous)\n","textLanguage":"python","robotConfig":[],"slot":0,"platform":"V5","sdkVersion":"20240802.15.00.00","appVersion":"4.62.0","fileFormat":"2.0.0","targetBrainGen":"First","v5Sounds":[{"name":"game over","url":"static/sounds/mixkit-arcade-retro-game-over-213.wav"}],"v5SoundsEnabled":false,"aiVisionSettings":{"colors":[],"codes":[],"tags":true,"AIObjects":true,"AIObjectModel":[],"aiModelDropDownValue":null}}